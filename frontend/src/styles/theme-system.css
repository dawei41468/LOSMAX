/* Consolidated Theme System - Single Source of Truth */

/* ===== BASE THEME TOKENS ===== */
:root {
  /* Core brand colors */
  --brand-primary: #2563eb;
  --brand-secondary: #8b5cf6;
  --brand-accent: #f59e0b;
  --brand-success: #10b981;
  --brand-warning: #f59e0b;
  --brand-error: #ef4444;
  --brand-info: #3b82f6;

  /* Base tokens */
  --color-white: #ffffff;
  --color-black: #0a0a0a;
  
  /* Semantic colors for light theme */
  --background: #ffffff;
  /* New surface token: mimics background in light mode */
  --surface: var(--background);
  --foreground: #0a0a0a;
  --card: #ffffff;
  --card-foreground: #0a0a0a;
  --popover: #ffffff;
  --popover-foreground: #0a0a0a;
  --primary: var(--brand-primary);
  --primary-foreground: #fafafa;
  --secondary: #f5f5f5;
  --secondary-foreground: #171717;
  --muted: #f5f5f5;
  --muted-foreground: #a3a3a3;
  --accent: #f5f5f5;
  --accent-foreground: #171717;
  --accent-hover: #e5e5e5;
  --destructive: var(--brand-error);
  --destructive-foreground: #fafafa;
  --standard: #9ca3af; /* gray-400 */
  --border: #e5e5e5; /* gray-200 */
  --input: #e5e5e5;
  --labels: var(--gray-500);
  --ring: var(--brand-primary);
  --radius: 0.5rem;

  /* Purple color palette for QuoteOfDay */
  --purple-50: #faf5ff;
  --purple-300: #c084fc;
  --purple-500: #8b5cf6;
  --purple-700: #6d28d9;
  --purple-950: #1e003a;

  --blue-50: #eff6ff;
  --blue-500: #3b82f6;
  --blue-700: #2563eb;
  --blue-900: #1e3a8a;

  --gray-300: #d1d5db; /* gray-300 */
  --gray-500: #6b7280; /* gray-500 */

  /* QuoteOfDay colors for light theme */
  --quote-bg: var(--purple-50);
  --quote-border: var(--purple-500);
  --quote-text: var(--purple-700);
  --quote-icon: var(--purple-700);

  /* Task Status colors for light theme */

  --task-bg: var(--blue-50);
  --task-border: var(--blue-500);
  --task-text: var(--blue-700);

  /* Extended semantic colors */
  --success: var(--brand-success);
  --success-foreground: #ffffff;
  --warning: var(--brand-warning);
  --error: var(--brand-error);
  --error-foreground: #ffffff;
  --warning-foreground: #ffffff;
  --info: var(--brand-info);
  --info-foreground: #ffffff;

  /* Animation tokens */
  --transition-fast: 150ms ease-in-out;
  --transition-normal: 250ms ease-in-out;
  --transition-slow: 350ms ease-in-out;
  --transition-theme: 300ms ease-in-out;

  /* Focus styles */
  --focus-ring-width: 2px;
  --focus-ring-offset: 2px;
  --focus-ring-color: var(--ring);
  
  /* Category colors */
  --category-health: #10b981;
  --category-work: #3b82f6;
  --category-family: #8b5cf6;
  --category-personal: #f59e0b;

  /* Status colors */
  --status-active: var(--brand-info); /* Changed to blue */
  --status-completed: #10b981;
  --status-incomplete: #f59e0b; /* Old status-active color */
}

/* ===== DARK THEME OVERRIDES ===== */
html.dark {
  --background: #0a0a0a;
  /* New surface token for dark mode: lighter than background, darker than card */
  --surface: #141414;
  --foreground: #fafafa;
  --card: #1f2937;
  --card-foreground: #fafafa;
  --popover: #1f2937;
  --popover-foreground: #fafafa;
  --primary: #3b82f6;
  --primary-foreground: #fafafa;
  --secondary: #262626;
  --secondary-foreground: #fafafa;
  --muted: #262626;
  --muted-foreground: #a3a3a3;
  --accent: #262626;
  --accent-foreground: #fafafa;
  --accent-hover: #404040;
  --destructive: #dc2626;
  --destructive-foreground: #fafafa;
  --standard: #4b5563; /* gray-600 */
  --border: #9ca3af; /* gray-400 */
  --input: #262626;
  --labels: var(--gray-300);
  --ring: #3b82f6;

  /* QuoteOfDay colors for dark theme */
  --quote-bg: var(--purple-950);
  --quote-border: var(--purple-700);
  --quote-text: var(--purple-300);
  --quote-icon: var(--purple-300);

  /* Task Status colors for light theme */
  --task-bg: var(--blue-900);
  --task-border: var(--blue-700);
  
  /* Category colors for dark theme */
  --category-health: #34d399;
  --category-work: #60a5fa;
  --category-family: #a78bfa;
  --category-personal: #fbbf24;

  /* Status colors for dark theme */
  --status-active: #60a5fa; /* Changed to blue for dark theme */
  --status-completed: #34d399;
  --status-incomplete: #fbbf24; /* Old status-active color for dark theme */
}

/* Badge status styles */
.badge {
  display: inline-flex;
  align-items: center;
  padding: 0.25rem 0.5rem;
  font-size: 0.75rem;
  font-weight: 500;
  border-radius: var(--radius-full);
  line-height: 0.7rem;
  white-space: nowrap;
}

.badge-active {
  background-color: var(--status-active);
  color: var(--foreground);
}

.badge-completed {
  background-color: var(--status-completed);
  color: var(--foreground);
}

.badge-incomplete {
  background-color: var(--status-incomplete);
  color: var(--foreground);
}

/* Explicit classes to ensure theme application */
.bg-card {
  background-color: var(--card);
}
.border-standard {
  border-color: var(--standard);
}
.text-labels {
  color: var(--labels);
}

/* Utility class for surface background */
.bg-surface {
  background-color: var(--surface);
}



/* ===== THEME TRANSITIONS ===== */
html {
  color-scheme: light;
  transition: color-scheme var(--transition-theme);
}

html.dark {
  color-scheme: dark;
}

/* Smooth theme transitions */
.theme-transition * {
  transition: background-color var(--transition-theme),
              color var(--transition-theme),
              border-color var(--transition-theme),
              box-shadow var(--transition-theme);
}

/* Disable transitions during theme change */
.theme-changing * {
  transition: none !important;
}

/* ===== ACCESSIBILITY SUPPORT ===== */
@media (prefers-contrast: high) {
  :root {
    --border: #000000;
  }
  
  html.dark {
    --border: #ffffff;
  }
}

@media (prefers-reduced-motion: reduce) {
  .theme-transition * {
    transition-duration: 1ms !important;
  }
}

/* ===== FOCUS MANAGEMENT ===== */
:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
}

/* ===== PROGRESS BAR STYLES ===== */
.progress-bar {
  flex-grow: 1;
  height: 0.5rem;
  background-color: var(--muted);
  border-radius: var(--radius);
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background-color: var(--primary);
  transition: width var(--transition-normal);
}


/* ===== TOAST CUSTOM STYLES ===== */
.toast-custom-close-right,
.toast-custom-close-right * {
  position: relative;
  padding-right: 0 !important;
  margin-right: 0 !important;
}

.toast-custom-close-right button[data-close-button],
.toast-custom-close-right .sonner-close-button,
.toast-custom-close-right [role="button"][aria-label="Close"] {
  position: absolute !important;
  top: 0.55rem !important;
  right: -0.3rem !important;
  left: auto !important;
  padding: 0 !important;
  margin: 0 !important;
}
